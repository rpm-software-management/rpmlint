language: generic

sudo: required

services:
  - docker

env:
  - DIST=centos7 PYTHON=python PYTEST=py.test FLAKE8=true
  - DIST=fedora28 PYTHON=python3 PYTEST=py.test-3 FLAKE8=flake8-3
  - DIST=fedoradev PYTHON=python3 PYTEST=py.test-3 FLAKE8=flake8-3
  - DIST=leap15 PYTHON=python3 PYTEST=py.test FLAKE8=flake8

before_install:
  - docker build -t $DIST -f test/Dockerfile-$DIST .

script:
  - docker run -e PYTHON=$PYTHON -e PYTEST=$PYTEST -e FLAKE8=$FLAKE8 $DIST test/docker-script.sh
